<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Page Title -->
  <title>Dom√© Soul ‚Äì Music, Mission & Marketplace</title>
  
  <!-- SEO Meta -->
  <meta name="description" content="Explore Dom√© Soul's music, humanitarian outreach, and marketplace ‚Äì a mission to bring light in the dust. Join the movement today.">
  <meta name="keywords" content="Dom√© Soul, music, humanitarian, outreach, marketplace, Afro-soul, folk, gospel, Afrobeat">
  <meta name="author" content="Dom√© Soul">
  
  <!-- Open Graph / Facebook / WhatsApp / LinkedIn -->
  <meta property="og:title" content="Dom√© Soul ‚Äì Music, Mission & Marketplace">
  <meta property="og:description" content="Explore Dom√© Soul's music, humanitarian outreach, and marketplace ‚Äì a mission to bring light in the dust.">
  <meta property="og:image" content="https://domesoul.com/assets/og-image.png">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://domesoul.com/">

  <!-- Twitter / X -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Dom√© Soul ‚Äì Music, Mission & Marketplace">
  <meta name="twitter:description" content="Explore Dom√© Soul's music, humanitarian outreach, and marketplace ‚Äì a mission to bring light in the dust.">
  <meta name="twitter:image" content="https://domesoul.com/assets/twitter-card.png">
  
  <!-- Theme Colors -->
  <meta name="theme-color" content="#6B4EFF"> <!-- Dom√© Soul Purple -->
  <meta name="msapplication-TileColor" content="#333232">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/images/logo.png">
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

 <!-- Styles -->
  <link rel="preload" href="styles.css?v=2" as="style">
  <link rel="stylesheet" href="styles.css?v=2">
  <script src="script.js" defer></script>

 <!-- Animations (AOS) -->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script defer src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    if (window.AOS) AOS.init({ duration: 800, easing: 'ease-in-out', once: true });
  });
</script>

<!-- JSON-LD: Website + Artist (single clean block) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "name": "Dom√© Soul",
      "url": "https://www.domesoul.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://www.domesoul.com/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "MusicGroup",
      "name": "Dom√© Soul",
      "url": "https://www.domesoul.com",
      "image": "https://www.domesoul.com/images/og-cover.jpg",
      "genre": ["Afro-soul","Gospel","Folk"],
      "sameAs": [
        "https://open.spotify.com/artist/3CQUZpVh6x10v1v49OqfkB",
        "https://www.youtube.com/@DomeSoulMusic",
        "https://instagram.com/YOUR_HANDLE"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "business",
        "email": "contact@domesoul.com"
      }
    }
  ]
}
</script>

</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>
  <!-- Header / Nav -->

<header class="site-header">
  <div class="container header-container">
    <a href="index.html" class="logo-link">
      <img src="images/logo.png" alt="Dom√© Soul Logo" class="site-logo">
      <span class="brand-name">Dom√© Soul</span>
    </a>

    <button class="nav-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="primary-nav">
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
    </button>

    <nav id="primary-nav" class="main-nav" aria-label="Primary">
      <a href="index.html">Home</a>
      <a href="music.html">Music</a>
      <a href="soul-mission.html">Soul Mission</a>
      <a href="press-kit.html">Press Kit</a>
      <a href="contact.html">Contact</a>
      <a href="articles.html">Articles</a>
    </nav>
  </div>
</header>

<main class="page">
<section class="music-page">
  <div class="container">
    <h1>Dom√© Soul Music</h1>
    <p class="tagline">Soulful Afro-folk & gospel expressions from the heart of Africa.</p>

    <!-- NEW: grid wrapper -->
   <div class="music-grid">


<!-- CARD: Where the Light Lives -->
<article class="music-card" id="card-light">
  <picture>
    <source srcset="images/where-the-light-lives-cover.webp" type="image/webp">
    <img src="images/where-the-light-lives-cover.jpg"
         alt="Where the Light Lives cover"
         class="music-cover" loading="lazy" decoding="async">
  </picture>

  <h2>Where the Light Lives</h2>
  <div class="music-actions">
  <!-- Streaming -->
  <a class="btn btn-neutral"
     href="https://open.spotify.com/track/5JfMg9vnpC1Xc1hvAsw05N?si=a88f745f639a42da"
     target="_blank" rel="noopener">üéß Listen</a>

  <a class="btn btn-neutral"
     href="https://www.youtube.com/@DomeSoulMusic"
     target="_blank" rel="noopener">‚ñ∂ YouTube</a>

  <!-- 30s preview -->

<button class="btn btn-neutral ds-audio-toggle" data-audio="audio-wtll">
  <span class="label">‚ñ∂ Preview (0:30)</span>
</button>
<audio id="audio-wtll" preload="none" playsinline>
  <source src="audio/where-the-light-lives-30s.mp3" type="audio/mpeg">
</audio>
    
<div class="mini-player" hidden>
  <span class="mini-player__title">Preview ‚Äî Where the Light Lives</span>
  <button class="btn btn-neutral" data-stop-for="audio-wtll">‚èπ Stop</button>
</div>  
  <!-- Modals -->
  <button class="btn" data-modal-target="#wtllLyrics">üìú Lyrics</button>
  <button class="btn btn-primary" data-modal-target="#wtllStory">üí° Behind the Song</button>
</div>
</article>
<!-- CARD: Feels Like Heaven With You -->
<article class="music-card" id="card-heaven">
  <picture>
    <source srcset="images/feels-like-heaven-cover.webp" type="image/webp">
    <img src="images/feels-like-heaven-cover.jpg"
         alt="Feels Like Heaven With You cover"
         class="music-cover" loading="lazy" decoding="async">
  </picture>

 <h2>Feels Like Heaven With You</h2>

<div class="music-actions">
  <!-- Streaming --> 
  <a class="btn btn-neutral" href="https://open.spotify.com/track/5SuokkPewIRoK8gb9xxhPS?si=44c02003055f4c80" target="_blank" rel="noopener">üéß Listen</a>
 <a class="btn btn-neutral" href="https://www.youtube.com/@DomeSoulMusic" target="_blank" rel="noopener noreferrer">‚ñ∂ YouTube</a>

  <!-- 30s preview -->
  <button class="btn btn-neutral ds-audio-toggle" data-audio="audio-flhwy">
    <span class="label">‚ñ∂ Preview (0:30)</span>
  </button>

  <!-- IMPORTANT: audio contains ONLY <source> (no DIVs inside) -->
  <audio id="audio-flhwy" preload="metadata" playsinline>
    <source src="audio/feels-like-heaven-30s.mp3" type="audio/mpeg">
  </audio>

  <!-- Mini player (sits AFTER the audio) -->
  <div class="mini-player" hidden>
    <span class="mini-player__title">Preview ‚Äî Feels Like Heaven With You</span>
    <button class="btn btn-neutral" data-stop-for="audio-flhwy">‚èπ Stop</button>
  </div>

  <!-- Modals -->
  <button class="btn btn-neutral" data-modal-target="#flhLyrics">üìú Lyrics</button>
  <button class="btn btn-primary" data-modal-target="#flhStory">üí° Behind the Song</button>
</div>
</article>

<!-- CARD: Still I Will Love You -->
<article class="music-card" id="card-still">
  <picture>
    <source srcset="images/still-i-will-love-you-cover.webp" type="image/webp">
    <img src="images/still-i-will-love-you-cover.jpg"
         alt="Still I Will Love You cover"
         class="music-cover" loading="lazy" decoding="async">
  </picture>

  <h2>Still I Will Love You</h2>

<div class="music-actions">
  <!-- Streaming -->
  <a class="btn btn-neutral"
     href="https://open.spotify.com/artist/3CQUZpVh6x10v1v49OqfkB?si=0pporqzRRt2OYMYiKVE-5A"
     target="_blank" rel="noopener">üéß Listen</a>

  <a class="btn btn-neutral"
     href="https://www.youtube.com/@DomeSoulMusic"
     target="_blank" rel="noopener">‚ñ∂ YouTube</a>

  <!-- 30s preview -->
  <button class="btn btn-neutral ds-audio-toggle" data-audio="audio-siwly">
    <span class="label">‚ñ∂ Preview (0:30)</span>
  </button>
  <audio id="audio-siwly" preload="none" playsinline>
    <source src="audio/still-i-will-love-you-30s.mp3" type="audio/mpeg">
  </audio>

  <!-- Optional mini-player -->
  <div class="mini-player" hidden>
    <span class="mini-player__title">Preview ‚Äî Still I Will Love You</span>
    <button class="btn btn-neutral" data-stop-for="audio-siwly">‚èπ Stop</button>
  </div>

  <!-- Modals -->
  <button class="btn btn-neutral" data-modal-target="#stillLyrics">üìú Lyrics</button>
  <button class="btn btn-primary" data-modal-target="#stillStory">üí° Behind the Song</button>
</div>
</article>
      
  <!-- Modals -->
<!-- MODAL: Where the Light Lives ‚Äî Lyrics -->
<div id="wtllLyrics" class="modal" role="dialog" aria-modal="true"
     aria-labelledby="wtllLyricsTitle" hidden>
  <div class="modal__backdrop" data-modal-close></div>
  <div class="modal__panel" tabindex="-1">
    <button class="modal__close" aria-label="Close" data-modal-close>&times;</button>
    <h2 id="wtllLyricsTitle">Lyrics ‚Äî Where the Light Lives</h2>
    <div class="modal__body">
      <p><strong>First verse‚Ä¶</strong></p>
      <p>
        I‚Äôve danced with sorrow, slept next to fear,<br>
        But you were the song I needed to hear,<br>
        Your hands don‚Äôt just hold, they understand,<br>
        You carry my heart like sacred land...
      </p>
    </div>
  </div>
</div>

<!-- MODAL: Where the Light Lives ‚Äî Behind the Song -->
<div id="wtllStory" class="modal" role="dialog" aria-modal="true"
     aria-labelledby="wtllStoryTitle" hidden>
  <div class="modal__backdrop" data-modal-close></div>
  <div class="modal__panel" tabindex="-1">
    <button class="modal__close" aria-label="Close" data-modal-close>&times;</button>
    <h2 id="wtllStoryTitle">Where the Light Lives ‚Äî Behind the Song</h2>
    <div class="modal__body">
      <p>
        Inspired by moments of quiet courage ‚Äî choosing to shine even when it‚Äôs hard,
        and becoming a shelter for others.
      </p>
    </div>
  </div>
</div>

<!-- MODAL: Feels Like Heaven With You ‚Äî Lyrics -->
<div id="flhLyrics" class="modal" role="dialog" aria-modal="true"
     aria-labelledby="flhLyricsTitle" hidden>
  <div class="modal__backdrop" data-modal-close></div>
  <div class="modal__panel" tabindex="-1">
    <button class="modal__close" aria-label="Close" data-modal-close>&times;</button>
    <h2 id="flhLyricsTitle">Feels Like Heaven With You ‚Äî Lyrics</h2>
    <div class="modal__body">
      <p>Verse 1<br>
      I was drifting like a song without a key,<br>
      Empty streets and skies that wouldn‚Äôt speak ‚Ä¶</p>

      <p>Chorus<br>
      Feels like heaven with you,<br>
      Like every storm finally passed through‚Ä¶</p>

      <p>Bridge<br>
      Maybe this is what grace feels like‚Ä¶</p>
    </div>
  </div>
</div>

<!-- MODAL: Feels Like Heaven With You ‚Äî Behind the Song -->
<div id="flhStory" class="modal" role="dialog" aria-modal="true"
     aria-labelledby="flhStoryTitle" hidden>
  <div class="modal__backdrop" data-modal-close></div>
  <div class="modal__panel" tabindex="-1">
    <button class="modal__close" aria-label="Close" data-modal-close>&times;</button>
    <h2 id="flhStoryTitle">Feels Like Heaven With You ‚Äî Behind the Song</h2>
    <div class="modal__body">
      <p>
        A celebration of tender love ‚Äî the quiet kind that heals, reassures,
        and makes ordinary rooms feel like holy ground. Written in one sitting,
        carried by a lilting guitar and soft harmonies.
      </p>
    </div>
  </div>
</div>

<!-- MODAL: Still I Will Love You ‚Äî Lyrics -->
<div id="stillLyrics" class="modal" role="dialog" aria-modal="true"
     aria-labelledby="stillLyricsTitle" hidden>
  <div class="modal__backdrop" data-modal-close></div>
  <div class="modal__panel" tabindex="-1">
    <button class="modal__close" aria-label="Close" data-modal-close>&times;</button>
    <h2 id="stillLyricsTitle">Still I Will Love You ‚Äî Lyrics</h2>
    <div class="modal__body">
      <!-- Replace with final lyrics -->
      <p><strong>Verse 1</strong><br>
        You don‚Äôt have to say a word,<br>
        I see your truth, I‚Äôve felt the hurt,<br>
        In a world that often turns away,<br>
        I‚Äôll stay, I‚Äôll stay...</p>

      <p><strong>Chorus</strong><br>
        Still I will love, when the fire is gone,<br>
        Still I will give, even if I‚Äôve got none‚Ä¶</p>

      <p><strong>Bridge</strong><br>
        Even when it hurts to smile...</p>
    </div>
  </div>
</div>

<!-- MODAL: Still I Will Love You ‚Äî Behind the Song -->
<div id="stillStory" class="modal" role="dialog" aria-modal="true"
     aria-labelledby="stillStoryTitle" hidden>
  <div class="modal__backdrop" data-modal-close></div>
  <div class="modal__panel" tabindex="-1">
    <button class="modal__close" aria-label="Close" data-modal-close>&times;</button>
    <h2 id="stillStoryTitle">Still I Will Love You ‚Äî Behind the Song</h2>
    <div class="modal__body">
      <p>
        A vow set to melody ‚Äî love that endures, promises kept when feelings fade.
        Arranged with warm strings and restrained percussion to let the vow breathe.
      </p>
    </div>
  </div>
</div>
</main>

<!-- Newsletter Card -->
<section class="newsletter section-dark">
  <h2>üì¨ Join the Dom√© Soul Community</h2>
  <p class="sub-text">Be the first to hear new music, mission updates, and exclusive giveaways.</p>

  <form id="ds-subscribe" class="form" action="https://formspree.io/f/manbagjw?redirect=https://yourdomain.com/thanks.html" method="POST" novalidate>
    <label class="visually-hidden">Leave this field empty
      <input type="text" name="_gotcha" tabindex="-1" autocomplete="off">
    </label>

    <div class="newsletter-grid">
      <input type="email" name="email" required placeholder="Enter Your Email" autocomplete="email">
      <button type="submit" class="btn btn-primary">Subscribe</button>
    </div>

    <p id="ds-subscribe-status" class="form-status" aria-live="polite" hidden></p>
  </form>
</section>

<!-- FOOTER -->

<footer class="site-footer">
  <div class="container footer-grid">
    <!-- Brand -->
    <div class="footer-col">
      <img src="images/logo.png" alt="Dom√© Soul Logo" class="footer-logo">
      <p>Music ‚Ä¢ Mission ‚Ä¢ Marketplace</p>
      <p class="footer-tagline">Dust in the Dark ‚Äî Shining Through Music & Humanity</p>
    </div>

    <!-- Navigation -->
    <div class="footer-col">
      <h4>Explore</h4>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="music.html">Music</a></li>
        <li><a href="soul-mission.html">Soul Mission</a></li>
        <li><a href="press-kit.html">Press Kit</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>

    <!-- Connect -->
    <div class="footer-col">
      <h4>Connect</h4>
      <div class="footer-icons">
        <a href="https://open.spotify.com/artist/3CQUZpVh6x10v1v49OqfkB" target="_blank" aria-label="Spotify" class="ico ico--spotify">üéµ</a>
        <a href="https://www.youtube.com/@DomeSoulMusic" target="_blank" aria-label="YouTube" class="ico ico--youtube">‚ñ∂</a>
        <a href="https://instagram.com/YOUR_HANDLE" target="_blank" aria-label="Instagram" class="ico ico--instagram">üì∏</a>
        <a href="https://www.tiktok.com/@YOUR_HANDLE" target="_blank" aria-label="TikTok" class="ico ico--tiktok">üé¨</a>
        <a href="https://facebook.com/YOUR_PAGE" target="_blank" aria-label="Facebook" class="ico ico--facebook">üìò</a>
        <a href="https://x.com/YOUR_HANDLE" target="_blank" aria-label="X" class="ico ico--x">üê¶</a>
<a href="https://wa.me/2349070610805" target="_blank" aria-label="WhatsApp" class="ico ico--whatsapp">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="20" height="20" fill="#25D366">
    <path d="M380.9 97.1C339-14.9 216.4-42.1 124.1 9.6 31.8 61.3-8.5 183.9 33.4 295.9L0 480l192.2-51.8c52.4 28.6 114.1 35.3 172 18.7 57.9-16.5 107.6-56.1 138.8-110.1 31.2-54 38.5-118.5 20.5-178.7-18-60.2-59.1-112-113.6-141.1zm-19.2 282.1c-27.4 24.5-62.3 38.7-99.2 40.8-31.5 1.8-63.2-5.3-90.9-20.5l-6.5-3.6-113.8 30.7 30.4-110.5-4.1-6.7c-34.5-56-36.6-126.5-5.6-184.7C96.1 67.3 163.6 34.5 230 44c66.3 9.5 123 56.6 144.1 119.8 21.1 63.3 5.6 133.4-39.3 183.4zM320 334.4c-8.7-4.3-51.5-25.6-59.6-28.5-8.1-2.9-14-4.3-19.8 4.3-5.9 8.7-22.7 28.5-27.9 34.3-5.1 5.8-10.3 6.6-19 2.2-8.7-4.3-36.6-13.5-69.7-43.2-25.8-22.9-43.2-51.2-48.3-59.9-5.1-8.7-.5-13.4 3.8-17.7 3.9-3.8 8.7-10.3 13-15.4 4.3-5.1 7.2-8.7 10.9-8.7 2.9 0 6.5 0 9.4 0 3 0 7.2-.5 11 8.3 3.8 8.7 12 29.5 13.1 31.6 1 2.1 1.7 4.6.3 7.4-1.3 2.8-2.1 4.6-4.3 7.2-2.2 2.6-4.6 5.1-6.5 8.1-2.2 3-4.5 6.1-1.9 11.1 2.6 5 11.6 19.1 24.9 31.1 17.1 15.9 31.5 20.8 36.5 23.1 5 2.2 7.8 1.9 10.6-1.2 2.8-3.1 12.2-14.3 15.5-19.2 3.3-4.8 6.8-4 11.1-2.4 4.3 1.6 27.2 12.8 31.8 15.1 4.6 2.2 7.8 1.3 11.1-.8 3.5-2.1 21-20.6 26.1-28.9 5.4-8.2 2.6-14.8-6.1-19.1z"/>
  </svg>
</a>     
        <a href="mailto:contact@domesoul.com" aria-label="Email" class="ico ico--email">‚úâ</a>
      </div>
    </div>

    <!-- Newsletter -->
    <div class="footer-col subscribe">
      <h4>Subscribe</h4>
      <form action="https://formspree.io/f/yourformid" method="POST" class="newsletter-form">
        <input type="email" name="email" placeholder="Your email" required>
        <button type="submit">Subscribe</button>
      </form>
    </div>
  </div>

  <div class="footer-bottom">
    <p>¬© 2025 Dom√© Soul. All rights reserved.</p>
  </div>
  <script>
(function () {
  const btn = document.querySelector('.nav-toggle');
  const nav = document.getElementById('primary-nav');
  if (!btn || !nav) return;

  // Toggle menu open/close
  btn.addEventListener('click', () => {
    const isOpen = nav.classList.toggle('open');
    btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
  });

  // Close menu on link click
  nav.addEventListener('click', (e) => {
    if (e.target.tagName === 'A') {
      nav.classList.remove('open');
      btn.setAttribute('aria-expanded', 'false');
    }
  });

  // Active link highlight
  const current = (location.pathname.split('/').pop() || 'index.html').toLowerCase();
  document.querySelectorAll('.main-nav a').forEach(a => {
    if (a.getAttribute('href').toLowerCase() === current) {
      a.classList.add('active');
    }
  });
})();
</script>
  <script>
(function () {
  if (window.__dsModalsInit) return; window.__dsModalsInit = true;

  function openModal(selector) {
    const m = document.querySelector(selector);
    if (!m) return;
    m.classList.add('is-open');
    m.removeAttribute('hidden');
    document.body.classList.add('no-scroll');
    // focus first focusable (if any)
    const focusable = m.querySelector('[autofocus], button, a, input, textarea, select');
    if (focusable) try { focusable.focus(); } catch(e){}
  }

  function closeModal(modal) {
    if (!modal) return;
    modal.classList.remove('is-open');
    modal.setAttribute('hidden', '');
    document.body.classList.remove('no-scroll');
  }

  // Open on any element with data-modal-target="#id"
  document.addEventListener('click', function (e) {
    const openBtn = e.target.closest('[data-modal-target]');
    if (openBtn) {
      e.preventDefault();
      const sel = openBtn.getAttribute('data-modal-target');
      if (sel) openModal(sel);
      return;
    }

    // Close on [data-close-modal] buttons
    const closeBtn = e.target.closest('[data-close-modal]');
    if (closeBtn) {
      e.preventDefault();
      const modal = closeBtn.closest('.modal');
      closeModal(modal);
      return;
    }

    // Click on backdrop closes
    if (e.target.classList && e.target.classList.contains('modal__overlay')) {
      const modal = e.target.closest('.modal');
      closeModal(modal);
    }
  });

  // Esc closes all
  document.addEventListener('keydown', function (e) {
    if (e.key === 'Escape') {
      document.querySelectorAll('.modal.is-open').forEach(closeModal);
    }
  });
})();
</script>
<script>
(function () {
  if (window.__dsModalsInit2) return; window.__dsModalsInit2 = true;

  function openModal(sel){
    const m = document.querySelector(sel);
    if (!m) return;
    m.classList.add('is-open');
    m.removeAttribute('hidden');
    document.body.classList.add('no-scroll');
  }
  function closeModal(m){
    if (!m) return;
    m.classList.remove('is-open');
    m.setAttribute('hidden','');
    document.body.classList.remove('no-scroll');
  }
  const modalFrom = el => el && el.closest('.modal');

  document.addEventListener('click', e => {
    const opener = e.target.closest('[data-modal-target]');
    if (opener) {
      e.preventDefault();
      openModal(opener.getAttribute('data-modal-target'));
      return;
    }
    const closer = e.target.closest('[data-close-modal], .modal__x, .modal-close');
    if (closer) {
      e.preventDefault();
      closeModal(modalFrom(closer));
      return;
    }
    // Click backdrop OR outside panel
    const m = modalFrom(e.target);
    if (m && (e.target.classList.contains('modal__overlay') || e.target === m)) {
      closeModal(m);
    }
  });

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') {
      document.querySelectorAll('.modal.is-open').forEach(closeModal);
    }
  });
})();
</script>
<script>
(function () {
  if (window.__dsInit) return; window.__dsInit = true;

  /* ---------- MODALS ---------- */
  function openModal(sel){
    const m = document.querySelector(sel);
    if (!m) return;
    m.classList.add('is-open');
    m.removeAttribute('hidden');
    document.body.classList.add('no-scroll');
  }
  function closeModal(m){
    if (!m) return;
    m.classList.remove('is-open');
    m.setAttribute('hidden','');
    document.body.classList.remove('no-scroll');
  }
  const modalFrom = el => el && el.closest('.modal');

  document.addEventListener('click', e => {
    // Open: data-modal-target="#id"
    const opener = e.target.closest('[data-modal-target]');
    if (opener) {
      e.preventDefault();
      openModal(opener.getAttribute('data-modal-target'));
      return;
    }
    // Close: data-close-modal, .modal__x, .modal-close
    const closer = e.target.closest('[data-close-modal], .modal__x, .modal-close');
    if (closer) {
      e.preventDefault();
      closeModal(modalFrom(closer));
      return;
    }
    // Backdrop click (or click on the modal root outside the panel)
    const m = modalFrom(e.target);
    if (m && (e.target.classList.contains('modal__overlay') || e.target === m)) {
      closeModal(m);
    }
  });

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') {
      document.querySelectorAll('.modal.is-open').forEach(closeModal);
    }
  });

  /* ---------- PREVIEW (0:30) ---------- */
  let currentAudio = null, currentBtn = null;
  const setBtnLabel = (btn, txt) => {
    const label = btn.querySelector('.label');
    (label || btn).textContent = txt;
  };
  const getAudioForBtn = (btn) => {
    const id = btn.getAttribute('data-audio');
    if (id) return document.getElementById(id.replace('#',''));
    // Fallback: nearest <audio> in the same card
    const card = btn.closest('article, .card, .music-card, li, div');
    if (card) return card.querySelector('audio');
    return null;
  };

  document.addEventListener('click', e => {
    const btn = e.target.closest('[data-audio], .js-preview');
    if (!btn) return;
    e.preventDefault();
    const audio = getAudioForBtn(btn);
    if (!audio) return;

    if (currentAudio && currentAudio !== audio) {
      currentAudio.pause(); currentAudio.currentTime = 0;
      if (currentBtn) setBtnLabel(currentBtn, '‚ñ∂ Preview (0:30)');
    }
    if (audio.paused) {
      audio.play(); setBtnLabel(btn, '‚è∏ Pause'); currentAudio = audio; currentBtn = btn;
    } else {
      audio.pause(); setBtnLabel(btn, '‚ñ∂ Preview (0:30)'); currentAudio = currentBtn = null;
    }
    audio.onended = () => { if (currentBtn) setBtnLabel(currentBtn, '‚ñ∂ Preview (0:30)'); currentAudio = currentBtn = null; };
  });
})();
</script>
<script>
(function () {
  if (window.__dsCardInit) return; window.__dsCardInit = true;

  /* ---------- MODALS (data-modal-target / data-modal-close) ---------- */
  function openModal(sel){
    const m = document.querySelector(sel);
    if (!m) return;
    m.classList.add('is-open');
    m.removeAttribute('hidden');
    document.body.classList.add('no-scroll');
    // focus panel
    const panel = m.querySelector('.modal__panel'); if (panel) panel.focus();
  }
  function closeModal(m){
    if (!m) return;
    m.classList.remove('is-open');
    m.setAttribute('hidden','');
    document.body.classList.remove('no-scroll');
  }
  const modalFrom = el => el && el.closest('.modal');

  document.addEventListener('click', e => {
    const opener = e.target.closest('[data-modal-target]');
    if (opener) { e.preventDefault(); openModal(opener.getAttribute('data-modal-target')); return; }

    const closer = e.target.closest('[data-modal-close], .modal__close');
    if (closer) { e.preventDefault(); closeModal(modalFrom(closer)); return; }

    const m = modalFrom(e.target);
    if (m && e.target.classList.contains('modal__backdrop')) { closeModal(m); }
  });
  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') document.querySelectorAll('.modal.is-open').forEach(closeModal);
  });

  /* ---------- PREVIEW (0:30) ---------- */
  let currentAudio = null, currentBtn = null;
  const label = (btn, txt) => (btn.querySelector('.label') || btn).textContent = txt;

  function getAudioFor(btn) {
    const id = btn.getAttribute('data-audio');
    if (id) return document.getElementById(id.replace('#',''));
    // fallback: nearest audio in same card
    const card = btn.closest('article, .card, .music-card, li, div');
    return card ? card.querySelector('audio') : null;
  }
  function getMiniFor(audio) {
    // mini-player should be NEXT element or sibling in same container
    if (!audio) return null;
    const next = audio.nextElementSibling;
    if (next && next.classList && next.classList.contains('mini-player')) return next;
    return audio.parentElement ? audio.parentElement.querySelector('.mini-player') : null;
  }

  document.addEventListener('click', e => {
    const btn = e.target.closest('.ds-audio-toggle, [data-audio], .js-preview');
    if (!btn) return;
    e.preventDefault();

    const audio = getAudioFor(btn);
    if (!audio) return;
    const mini = getMiniFor(audio);

    if (currentAudio && currentAudio !== audio) {
      currentAudio.pause(); currentAudio.currentTime = 0;
      if (currentBtn) label(currentBtn, '‚ñ∂ Preview (0:30)');
      const prevMini = getMiniFor(currentAudio); if (prevMini) prevMini.hidden = true;
    }

    if (audio.paused) {
      audio.play(); label(btn, '‚è∏ Pause'); currentAudio = audio; currentBtn = btn;
      if (mini) mini.hidden = false;
    } else {
      audio.pause(); label(btn, '‚ñ∂ Preview (0:30)'); currentAudio = currentBtn = null;
      if (mini) mini.hidden = true;
    }

    audio.onended = () => {
      if (currentBtn) label(currentBtn, '‚ñ∂ Preview (0:30)');
      if (mini) mini.hidden = true;
      currentAudio = currentBtn = null;
    };
  });

  // Mini-player Stop button
  document.addEventListener('click', e => {
    const stop = e.target.closest('[data-stop-for]');
    if (!stop) return;
    e.preventDefault();
    const id = stop.getAttribute('data-stop-for');
    const audio = document.getElementById(id);
    if (audio) { audio.pause(); audio.currentTime = 0; }
    if (currentBtn) label(currentBtn, '‚ñ∂ Preview (0:30)');
    const mini = audio ? getMiniFor(audio) : null; if (mini) mini.hidden = true;
    currentAudio = currentBtn = null;
  });
})();
</script>
<script>
(function(){
  if (window.__previewFix) return; window.__previewFix = true;

  const BTN_SEL = '.ds-audio-toggle,[data-audio],.js-preview';

  function setLabel(btn, text){
    (btn.querySelector('.label') || btn).textContent = text;
  }
  function audioFor(btn){
    const id = (btn.getAttribute('data-audio') || '').replace('#','');
    if (id) return document.getElementById(id);
    // Fallback: nearest audio in the same card
    const card = btn.closest('article, .card, .music-card, li, div');
    return card ? card.querySelector('audio') : null;
  }
  function miniFor(audio){
    if (!audio) return null;
    const next = audio.nextElementSibling;
    if (next && next.classList && next.classList.contains('mini-player')) return next;
    return audio.parentElement ? audio.parentElement.querySelector('.mini-player') : null;
  }

  let currentAudio = null, currentBtn = null;

  function stopOthers(except){
    document.querySelectorAll('audio').forEach(a=>{
      if (a !== except){ a.pause(); a.currentTime = 0; }
    });
    document.querySelectorAll(BTN_SEL).forEach(b=>{
      if (b !== currentBtn) setLabel(b, '‚ñ∂ Preview (0:30)');
    });
    document.querySelectorAll('.mini-player').forEach(mp=>{
      if (miniFor(except) !== mp) mp.hidden = true;
    });
  }

  document.addEventListener('click', async (e)=>{
    const btn = e.target.closest(BTN_SEL);
    if (!btn) return;

    // PREVIEW
    if (btn.matches(BTN_SEL)) {
      e.preventDefault();
      const audio = audioFor(btn);
      if (!audio) return console.warn('No audio found for', btn);

      const mini = miniFor(audio);
      stopOthers(audio);

      try {
        if (audio.paused){
          await audio.play();
          setLabel(btn, '‚è∏ Pause');
          if (mini) mini.hidden = false;
          currentAudio = audio; currentBtn = btn;
        } else {
          audio.pause();
          setLabel(btn, '‚ñ∂ Preview (0:30)');
          if (mini) mini.hidden = true;
          currentAudio = currentBtn = null;
        }
        audio.onended = ()=>{
          setLabel(btn, '‚ñ∂ Preview (0:30)');
          if (mini) mini.hidden = true;
          currentAudio = currentBtn = null;
        };
      } catch (err){
        console.error('Audio play failed:', err);
        // Optional: fall back to Spotify link if playback fails
        const spotify = btn.closest('.music-actions')?.querySelector('a[href*="open.spotify.com"]');
        if (spotify) spotify.click();
      }
    }
  });

  // Mini player "Stop" buttons
  document.addEventListener('click', (e)=>{
    const stop = e.target.closest('[data-stop-for]');
    if (!stop) return;
    e.preventDefault();
    const a = document.getElementById(stop.getAttribute('data-stop-for'));
    if (a){ a.pause(); a.currentTime = 0; }
    if (currentBtn) setLabel(currentBtn, '‚ñ∂ Preview (0:30)');
    const mini = a ? miniFor(a) : null; if (mini) mini.hidden = true;
    currentAudio = currentBtn = null;
  });
})();
</script>

  </body>
</footer>
